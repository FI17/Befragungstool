@model Umfrage_Tool.QuestionViewModel
@* Kumulieren der gegebenen Antworten *@
@{
    Dictionary<string, int> Antworten = new Dictionary<string, int>();
    foreach (var Antwort in Model.answers)
    {
        string Index = Antwort.position.ToString();
        Antworten[Index] = 0;
    }
    foreach (var Beantwortung in Model.answeringViewModels)
    {
        string Index = (Convert.ToInt32(Beantwortung.text) - 1).ToString();
        Antworten[Index]++;
    }
    int Anzahl_der_Zeilen = Antworten.Count() + 1;
}
@* Berechnung für die Skalenanzeige *@
@{
    int Gesamtmenge = Model.answeringViewModels.Count();
    double Teilmengen = 0;
    int Haeufigkeit_der_Antwort = 0;
    int Wertigkeit_der_Antwort = 0;
    int zu_addierender_Wert = 0;
    string Index_der_Antwort = "";
    foreach (var Antwortmoeglichkeit in Model.answers)
    {
        Index_der_Antwort = Antwortmoeglichkeit.position.ToString();
        Wertigkeit_der_Antwort = Antwortmoeglichkeit.position + 1;
        Haeufigkeit_der_Antwort = Antworten[Index_der_Antwort];
        zu_addierender_Wert = Wertigkeit_der_Antwort * Haeufigkeit_der_Antwort;
        Teilmengen += zu_addierender_Wert;
    }
    int Durchschnitt = Convert.ToInt32(((double)Teilmengen / (double)Gesamtmenge) * 100);
    int Maximum = Model.answers.Count() * 100;
    string Hoehe_der_Skala = (37 * Model.answers.Count() - 37) + "px";
}
@* Tabellenkopf *@
@{
    <tr>
        <th class="Kopfzeile" rowspan="@Anzahl_der_Zeilen">
            <input class="input-range" style="height:@Hoehe_der_Skala" type="range" value="@Durchschnitt" step="1" min="100" max="@Maximum" disabled>
        </th>
        <th>
            Antwort:
        </th>
        <th>
            Anteil:
        </th>
        <th>
            Anteil in Prozent:
        </th>
    </tr>
}
@* Auflisten der einzelnen Antworten *@
@{
    int haeufigste_Antwort = Antworten.OrderByDescending(d => d.Value).First().Value;
    int Gesamtmenge_der_gegebenen_Antworten = Model.answeringViewModels.Count();
    foreach (var Beantwortung in Antworten.OrderBy(d => d.Key))
    {
        string Klasse_fuer_Groessten_Eintrag = "";
        int Anzahl_der_gegebenen_Antwort = Beantwortung.Value;
        string Text_der_gegebenen_Antwort = Model.answers.FirstOrDefault(u => u.position.ToString() == Beantwortung.Key).text;
        if (Anzahl_der_gegebenen_Antwort == haeufigste_Antwort)
        {
            Klasse_fuer_Groessten_Eintrag = "Groesster_Eintrag";
        }
        <tr class="@Klasse_fuer_Groessten_Eintrag Antwortenzeile">
            <td>
                <b>
                    @Text_der_gegebenen_Antwort
                </b>
            </td>
            <td>
                @Anzahl_der_gegebenen_Antwort
            </td>
            <td>
                @Math.Round((double)Anzahl_der_gegebenen_Antwort / (double)Gesamtmenge_der_gegebenen_Antworten * 100, 2) %
            </td>
        </tr>
    }
}